{% extends "home.html" %}
{% load static %}

{% block title %}{{ submission.title }}{% endblock %}

{% block content %}

<div class="submissions">
  <ol>
    <li class="news-item">
      <span class="vote-arrow">â–²</span>

      {% if submission.url %}
        <a class="news-title" href="{{ submission.url }}" target="_blank">
          {{ submission.title }}
        </a>
        {% if submission.domain %}
          <span class="domain">({{ submission.domain }})</span>
        {% endif %}
      {% else %}
        <span class="news-title">{{ submission.title }}</span>
      {% endif %}

      <small class="news-meta">
        {{ submission.points }} points by {{ submission.author.username }}
        | {{ submission.created_at|timesince }} ago
        | {{ submission.comments.count }} comments
      </small>
    </li>
  </ol>
</div>



<h3>All Comments</h3>

{% if user.is_authenticated %}
<form method="post" action="{% url 'comments:add_comment' submission.id %}">
  {% csrf_token %}
  <textarea name="content" rows="4" placeholder="Add your comment..." required></textarea><br>
  <button  class="add_comment"type="submit">add comment</button>
</form>
{% else %}
<p><a href="{% url 'login' %}">Login</a> to comment</p>
{% endif %}



<ul class="comments">
  {% for comment in comments %}
    <li>
      {% include "comments/comment_item.html" with comment=comment level=0 %}
    </li>
  {% empty %}
    <p>No comments yet.</p>
  {% endfor %}
</ul>

{% endblock %}
